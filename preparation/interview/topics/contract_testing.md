# Контрактное тестирование

## Вопросы и ответы

**1. Что такое контрактное тестирование?**  
Проверка, что реализация API соответствует контракту (OpenAPI) или ожиданиям
consumer‑ов (Pact CDC).

**2. Чем контрактные тесты отличаются от интеграционных?**  
Контрактные не требуют поднятия всех сервисов, быстрее и стабильнее, фокус —
на формате взаимодействия.

**3. Какие подходы ты знаешь?**  
- Provider‑driven: валидация по OpenAPI/Swagger  
- Consumer‑driven: Pact / Spring Cloud Contract

**4. Как валидировать OpenAPI в тестах?**  
Схемы хранятся в проекте, ответы сравниваются со схемой.

```java
given()
.when()
    .get("/api/users/123")
.then()
    .statusCode(200)
    .body(matchesJsonSchemaInClasspath("schemas/user.json"));
```

**5. Что такое Pact Broker и зачем он нужен?**  
Хранилище контрактов, матрица совместимости, публикация/верификация, web UI,
интеграция с CI/CD.

**6. Как выглядит пайплайн для Pact?**  
Consumer публикует контракт → Provider верифицирует → Broker хранит статус.

**7. Когда уместен CDC?**  
Микросервисы, независимые команды, быстрый feedback.

**8. Основные риски контрактных тестов?**  
Слишком подробные контракты, устаревшие схемы, сложная поддержка.

**9. Что спрашивают на Senior‑уровне?**  
Интеграция с CI/CD, стратегия версионирования, can‑i‑deploy, управление
breaking changes.
