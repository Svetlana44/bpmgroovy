# HTTP коды ответов

## Вопросы и ответы

**1. Что такое статус‑коды HTTP и зачем они нужны?**  
Статус‑код сообщает результат обработки запроса: успех, ошибка клиента,
ошибка сервера, редирект. Это контракт между клиентом и сервером и основа
для автопроверок API.

**2. Какие классы кодов выделяют?**  
- 1xx — информационные  
- 2xx — успех  
- 3xx — редиректы  
- 4xx — ошибка клиента  
- 5xx — ошибка сервера

**3. Когда возвращать 200 vs 201 vs 204?**  
- `200 OK` — успешный запрос с телом ответа  
- `201 Created` — создан ресурс, обычно с `Location`  
- `204 No Content` — успех без тела (например, успешный DELETE)

**4. Чем отличаются 400, 401, 403, 404?**  
- `400 Bad Request` — невалидные входные данные  
- `401 Unauthorized` — нет/некорректный токен  
- `403 Forbidden` — токен есть, но нет прав  
- `404 Not Found` — ресурс не найден

**5. Когда использовать 409?**  
`409 Conflict` — конфликт состояния (например, дубль уникального значения,
гонка при обновлении версии сущности).

**6. Что значит 422 Unprocessable Entity?**  
Синтаксис корректен, но бизнес‑валидация не прошла. Часто используют вместо
`400` для семантических ошибок.

**7. Какие 5xx коды наиболее важны?**  
- `500 Internal Server Error` — непредвиденная ошибка сервера  
- `502 Bad Gateway` — прокси не получил корректный ответ от апстрима  
- `503 Service Unavailable` — сервис недоступен/перегружен  
- `504 Gateway Timeout` — таймаут апстрима

**8. Как тестировать коды статуса?**  
Проверять статус на позитивных и негативных сценариях, а также соответствие
контракту (OpenAPI/Swagger).

```java
given()
    .header("Authorization", "Bearer " + token)
.when()
    .post("/api/users")
.then()
    .statusCode(201);
```

**9. Типовые ошибки в кодах статуса?**  
- 200 при валидационной ошибке  
- 500 вместо 4xx при ошибках клиента  
- 404 вместо 403 (маскировка прав возможна, но должна быть осознанной)

**10. Что важно для Senior‑уровня?**  
Понимание семантики, влияния на клиентов, метрик и ретраев, и связь с
наблюдаемостью (логирование + алерты по классам кодов).
