# Практика: базовые сценарии API‑тестов

## Цели
- Отработать базовую проверку CRUD
- Научиться писать негативные сценарии
- Закрепить работу со статус‑кодами и валидацией схемы

## Базовый набор сценариев
1. **Healthcheck**: `/health` или `/status` должен возвращать 200.
2. **GET коллекции**: пагинация, лимиты, сортировка.
3. **GET по id**: корректный объект, валидная структура.
4. **POST**: создание объекта, проверка тела ответа.
5. **PUT/PATCH**: обновление, частичное обновление.
6. **DELETE**: удаление и последующий 404.
7. **Негативные**: неверный формат, отсутствующее поле, неверный тип.
8. **Авторизация**: 401 без токена, 403 без прав.
9. **Схема**: JSON Schema валидация ключевых ответов.
10. **Идемпотентность**: повторный POST с idempotency‑key.

## Черновики упражнений

### 1. CRUD поток
- Создать объект (POST), проверить 201 и `id`.
- Получить объект (GET), проверить поля.
- Обновить поле (PATCH), проверить изменение.
- Удалить (DELETE), убедиться в 404 при повторном GET.

### 2. Негативные сценарии
- Отправить пустое тело — 400.
- Отправить неверный тип поля — 400.
- Отправить несуществующий id — 404.

### 3. Пагинация и фильтры
- Запросить `page=1&size=10`, проверить размер.
- Запросить `sort=createdAt,desc`, проверить порядок.
- Применить фильтр по статусу.

### 4. Авторизация
- Без токена — 401.
- С токеном без роли — 403.
- С валидным токеном — 200.

### 5. Контракт/схема
- Валидировать JSON Schema для ответа `GET /resource/{id}`.
- Проверить обязательные поля и типы.

## Подсказки
- Фиксируй тестовые данные с префиксом `test-`.
- Делай очистку данных после тестов.
- Держи отдельные тесты для позитивных и негативных сценариев.
